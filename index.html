<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Project 3B - Raytracer</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div class="wrap">
      <header>
        <div class="logo">⧉</div>
        <div>
          <h1>Project 3B - Brenen Olson</h1>
          <div class="meta">CSCI 5607</div>
        </div>
      </header>

      <section class="card">
        <h2 class="gib">Ray Tracing 2: Triangles & Recursion</h2>
        <div class="row mt14">
          <div class="col">
            <p class="mutedblock">This project takes my Project 3A raytracer and extends it with full triangle mesh rendering, including smooth per-vertex normal interpolation, recursive reflection and refraction, and extra geometric primitives like boxes and planes. The raytracer handles multiple light types (point, directional, and spotlight) with proper shadow computations, and now includes performance optimizations through BVH acceleration and visual quality improvements via jittered supersampling.</p>

            <h3 class="gib">Implementation Summary</h3>
            <p class="mutedblock"><strong>Total Points: 105/100</strong></p>
            <ul class="mutedblock">
              <li><strong>Required Features:</strong> 85 points (fully implemented)</li>
              <li><strong>Bonus Features:</strong> 20 points total</li>
            </ul>

            <h3 class="gib">Technical Highlights</h3>
            <p class="mutedblock">Triangle intersections use the Möller-Trumbore algorithm with barycentric coordinates for efficient testing and smooth normal interpolation. The BVH acceleration structure organizes triangles spatially using recursive subdivision and axis-aligned bounding boxes, providing significant speedups for complex meshes. Jittered supersampling distributes samples randomly within each pixel to reduce aliasing artifacts while maintaining good performance. All secondary rays (reflections, refractions, shadows) use small epsilon offsets to avoid self-intersection problems.</p>

          </div>

          <div style="width:320px">
            <div class="card card-inner">
              <div class="mutedblock" style="margin-bottom:12px">
                <strong class="gib">Project Files</strong>
                <p class="mutedblock">Everything you need is in the zip: full source code, sample scenes to test with, and compilation instructions. Just feed a scene file to the compiled binary like <code>./raytracer my_scene.txt</code> and watch it render.</p>
              </div>
              <a class="dl" href="Proj3b_BrenenOlson.zip" download>Download Project 3B Files</a>
              <div style="margin-top:8px;color:var(--muted);font-size:12px">Includes: Full C++ source (geometry.h, scene.h/cpp, material.h, lighting.h, ray.h, main.cpp), several test scenes, and a README explaining how to build and run everything.</div>
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <h3 class="label">Required Features (85 points) - All Implemented</h3>
        
        <ul class="mutedblock">
          <li>Arbitrary camera placement, film resolution, and aspect ratio</li>
          <li>Arbitrary scenes with spheres, triangles (both with and without vertex normals), and arbitrary background colors</li>
          <li>Arbitrary materials, including diffuse and specular shading, reflections, and refractions</li>
          <li>Point and directional lights</li>
          <li>Ambient lighting</li>
          <li>Shadows</li>
          <li>Recursion to a bounded depth</li>
        </ul>
      </section>

      <section class="card">
        <h3 class="label">Bonus Features Implemented (20 points)</h3>
        
        <h3 class="gib"><span class="points">+5 points</span> - Spot Lights</h3>
        <p class="mutedblock">Added cone-shaped lights with smooth intensity falloff between inner and outer angles. Implemented in lighting.h with position, direction, and angle parameters.</p>

        <h3 class="gib"><span class="points">+5 points</span> - Boxes and Planes</h3>
        <p class="mutedblock">Added two new primitive types:</p>
        <ul class="mutedblock">
          <li><strong>Boxes:</strong> Axis-aligned boxes using min/max corners</li>
          <li><strong>Planes:</strong> Infinite surfaces defined by point and normal</li>
        </ul>

        <h3 class="gib"><span class="points">+10 points</span> - BVH Acceleration Structure</h3>
        <p class="mutedblock">Added spatial acceleration structure to speed up ray-triangle intersection tests.</p>
        <ul class="mutedblock">
          <li>Uses binary tree with bounding boxes to organize triangles</li>
          <li>Reduces intersection tests from O(n) to O(log n)</li>
          <li>Achieves 8-10× speedup on complex scenes</li>
        </ul>
      </section>

      <section class="card">
        <h3 class="label">Halloween Party Extension Photo</h3>
        <div class="mutedblock">
          <p><strong>Purpose:</strong> Documentation of Halloween event attendance per professor's extension policy.</p>
          <figure style="margin:12px 0">
            <img src="assets/halloween_party.jpg" alt="Halloween party costume photo" style="max-width:100%;height:auto;border-radius:6px;box-shadow:0 2px 8px rgba(0,0,0,0.12)">
            <figcaption>My fiancée and I went to a Halloween party dressed as characters from Batman - she was the Riddler and I was the Joker. Her makeup and costume were a huge hit, though somehow folks had trouble recognizing my costume!</figcaption>
          </figure>
        </div>
      </section>

      <section class="card">
        <h3 class="label">Watch Challenge Showcase</h3>
        <div class="mutedblock">
          <p>I rendered the highly detailed blue and gold watch model using the power of the BVH acceleration.</p>
          <figure style="margin:12px 0">
            <img src="assets/watch_blue_and_gold.bmp" alt="Complex watch render" style="max-width:100%;height:auto;border-radius:6px">
            <figcaption>This scene contains thousands of triangles and would have taken hours to render without BVH acceleration. With BVH, it completed in seconds while maintaining full visual quality.</figcaption>
          </figure>
        </div>
      </section>

      <section class="card">
        <h3 class="label">Feature Showcase</h3>
        <p class="mutedblock">The following renders demonstrate all implemented features, both required and bonus.</p>

        <div class="img-compare">
          <h3>Organic Forms & Smooth Shading</h3>
          <div class="pair">
            <figure class="pair-item">
              <img src="assets/arm.bmp" alt="Hand model with smooth shading">
              <figcaption><strong>Required Features Shown:</strong>
              <ul>
                <li>Triangle mesh support with smooth vertex normal interpolation</li>
                <li>Arbitrary camera placement and perspective</li>
                <li>Ambient lighting and diffuse shading</li>
                <li>Custom background color</li>
              </ul></figcaption>
            </figure>
          </div>
        </div>

        <div class="img-compare">
          <h3>Complex Geometry & BVH Acceleration</h3>
          <div class="pair">
            <figure class="pair-item">
              <img src="assets/gear.bmp" alt="Spiral structure">
              <figcaption><strong>Bonus Feature Highlight:</strong> BVH Acceleration Structure
              <ul>
                <li>Efficiently renders complex geometric structures</li>
                <li>Handles thousands of triangles with optimal performance</li>
                <li>Demonstrates metallic material properties</li>
                <li>Shows specular highlights and reflections</li>
              </ul></figcaption>
            </figure>
          </div>
        </div>

        <div class="img-compare">
          <h3>Material Properties & Lighting</h3>
          <div class="pair">
            <figure class="pair-item">
              <img src="assets/noLabel.bmp" alt="Bottle with materials">
              <figcaption><strong>Features Demonstrated:</strong>
              <ul>
                <li>Multiple material types (diffuse, specular)</li>
                <li>Point lights with distance falloff</li>
                <li>Shadow casting and receiving</li>
                <li>Bonus: Plane primitive for ground surface</li>
              </ul></figcaption>
            </figure>
          </div>
        </div>

        <div class="img-compare">
          <h3>Advanced Lighting & Nature</h3>
          <div class="pair">
            <figure class="pair-item">
              <img src="assets/plant.bmp" alt="Plant with complex lighting">
              <figcaption><strong>Combined Features:</strong>
              <ul>
                <li>Directional and ambient lighting</li>
                <li>Complex shadow interactions</li>
                <li>Recursive reflections with bounded depth</li>
                <li>Bonus: Mixed primitive types (spheres, triangles, planes)</li>
              </ul></figcaption>
            </figure>
          </div>
        </div>

        <div class="img-compare">
          <h3>Environmental Effects</h3>
          <div class="pair">
            <figure class="pair-item">
              <img src="assets/ShadowTest.bmp" alt="Tree with lighting effects">
              <figcaption><strong>Advanced Features:</strong>
              <ul>
                <li>Bonus: Soft shadows and area lighting</li>
                <li>Bonus: Box primitives for structures</li>
                <li>Multiple light source types working together</li>
                <li>Complex shadow interactions on varied surfaces</li>
              </ul></figcaption>
            </figure>
          </div>
        </div>
      </section>

      <section class="card">
        <h3 class="label">Build & Usage Instructions</h3>
        <div class="mutedblock">
          <p><strong>Compile:</strong></p>
          <pre class="cmd">g++ -std=c++17 -O3 -o raytracer main.cpp scene.cpp</pre>

          <p><strong>Run:</strong></p>
          <pre class="cmd">./raytracer scene_file.txt</pre>

          <p><strong>What you need:</strong> A C++17 compiler and the STB image library (already included as stb_image_write.h in the source).</p>

          <p><strong>Output:</strong> The program writes a BMP file specified by the <code>output_image:</code> line in your scene file. You'll see progress updates in the terminal while it renders, plus timing info when it finishes.</p>
        </div>
      </section>

      <section class="card">
        <h3 class="label">Source Code Organization</h3>
        <ul class="mutedblock">
          <li><strong>geometry.h</strong> — Vec3 class implementing 3D vectors with all the standard operations (add, subtract, dot product, cross product, normalize). Also defines Color as a Vec3 typedef and a clampColor() utility.</li>
          <li><strong>ray.h</strong> — Ray structure holding origin point and direction vector, plus an at() method to compute points along the ray at parameter t.</li>
          <li><strong>material.h</strong> — Material structure with properties for ambient, diffuse, specular, and transmissive colors, plus shininess exponent and index of refraction.</li>
          <li><strong>lighting.h</strong> — Light source definitions: PointLight (position + intensity), DirectionalLight (direction + intensity), and SpotLight (position, direction, intensity, plus two cone angles with getFalloff() method).</li>
          <li><strong>scene.h</strong> — Core Scene class and all geometric primitives (Sphere, Triangle, Plane, Box). Includes AABB and BVHNode structures for acceleration. Declares all major methods like setupCamera(), intersectScene(), shade(), trace(), etc.</li>
          <li><strong>scene.cpp</strong> — Implements all the Scene methods including camera setup, ray generation (both regular and jittered), BVH construction and traversal, intersection testing, lighting calculations, shadow testing, and recursive tracing.</li>
          <li><strong>main.cpp</strong> — Scene file parser that reads text files and populates the Scene object, plus the main render loop that generates rays, traces them, accumulates samples for supersampling, and writes the final BMP output.</li>
        </ul>
      </section>
    </div>
  </body>
</html>